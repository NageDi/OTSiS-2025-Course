%% Лабораторная работа №1: Основы сигналов в MATLAB
% Курс: ОТСиС 2025
% Студент: _________________
% Дата: _________________

%% 1. ПОДГОТОВКА
clear; clc; close all;

% Параметры
fs = 1000;       % Частота дискретизации, Гц
duration = 1.0;  % Длительность, с
t = 0 : 1/fs : duration - 1/fs; % Вектор времени

disp('✅ Окружение готово!');

%% 2. ГЕНЕРАЦИЯ СИГНАЛОВ
% Синусоида 5 Гц
f0 = 5;
s_sine = sin(2*pi*f0*t);

% Меандр 2 Гц (прямоугольные импульсы)
s_square = square(2*pi*2*t);

% Шум (помехи в канале)
noise = 0.2 * randn(size(t));

% Зашумленный сигнал
s_noisy = s_sine + noise;

%% 3. ВИЗУАЛИЗАЦИЯ ПРИМЕРОВ
figure('Name', 'Lab1_Signals', 'NumberTitle', 'off', 'Color', 'w');

% Подграфик 1: Синус
subplot(2, 2, 1);
plot(t, s_sine, 'b', 'LineWidth', 1.5);
title('Синусоида 5 Гц');
xlabel('Время, с');
ylabel('Амплитуда');
grid on;
ylim([-1.5 1.5]);

% Подграфик 2: Зашумленный сигнал
subplot(2, 2, 2);
plot(t, s_noisy, 'r', 'LineWidth', 0.5);
hold on;
plot(t, s_sine, 'b--', 'LineWidth', 1);
title('Синус + Шум');
xlabel('Время, с');
ylabel('Амплитуда');
legend('Зашумленный', 'Идеальный');
grid on;

% Подграфик 3: Меандр
subplot(2, 2, 3);
plot(t, s_square, 'g', 'LineWidth', 1.5);
title('Меандр 2 Гц');
xlabel('Время, с');
ylabel('Амплитуда');
grid on;
ylim([-1.5 1.5]);

% Подграфик 4: Шум
subplot(2, 2, 4);
plot(t, noise, 'Color', [0.7 0 0.7], 'LineWidth', 0.5);
title('Белый шум');
xlabel('Время, с');
ylabel('Амплитуда');
grid on;

%% 4. ЗАДАНИЕ ДЛЯ СТУДЕНТА: ЗАТУХАЮЩАЯ СИНУСОИДА
%
% Задача: Сгенерируйте сигнал ЗАТУХАЮЩЕЙ СИНУСОИДЫ (Damped Sine Wave)
% Формула: x(t) = exp(-3*t) .* cos(2*pi*10*t)
%
% Где:
%  - exp(-3*t) - экспоненциальное затухание
%  - cos(2*pi*10*t) - косинус с частотой 10 Гц
%  - .* - поэлементное умножение
%
% Требования:
% 1. Создайте новый вектор времени от 0 до 2 секунд (двойную длительность)
% 2. Рассчитайте x(t) по формуле выше
% 3. Постройте график в новом окне
% 4. Подпишите оси, добавьте заголовок и сетку
% 5. Используйте цвет линии: оранжевый [1 0.6 0]
%
% ============ РЕШЕНИЕ ============

% Создаем новый вектор времени: от 0 до 2 с шагом 1/fs
t_task = 0 : 1/fs : 2.0 - 1/fs;

% Рассчитываем сигнал по формуле
x_damped = exp(-3*t_task) .* cos(2*pi*10*t_task);

% Создаем новую фигуру (окно)
figure('Name', 'Lab1_Task_Damped_Sine', 'NumberTitle', 'off', 'Color', 'w');

% Строим график
plot(t_task, x_damped, 'Color', [1 0.6 0], 'LineWidth', 2);

% Оформление графика (ОБЯЗАТЕЛЬНО!)
title('Затухающая синусоида: x(t) = e^{-3t} cos(2π·10t)', 'FontSize', 12);
xlabel('Время, с');
ylabel('Амплитуда');
grid on;
xlim([0 2]);
ylim([-1.2 1.2]);

% Добавляем легенду
legend('x(t) = exp(-3t)·cos(2π·10t)', 'Location', 'northeast');

% Дополнительный анализ (опционально)
fprintf('\n=== РЕЗУЛЬТАТЫ АНАЛИЗА ===\n');
fprintf('Максимальное значение x(t): %.4f\n', max(x_damped));
fprintf('Минимальное значение x(t): %.4f\n', min(x_damped));
fprintf('Энергия сигнала: %.4f\n', sum(x_damped.^2) * (1/fs));

%% 5. ДОПОЛНИТЕЛЬНЫЕ ЗАДАНИЯ (ДЛЯ ПРОДВИНУТЫХ)
%
% Задание 5.1: Создайте затухающий СИНУС (вместо косинуса)
% x2(t) = exp(-2*t) .* sin(2*pi*8*t)
%
% Задание 5.2: Сравните затухание с разными коэффициентами
% alpha = [1, 2, 3, 5]
% Постройте все графики на одном подграфике
%
% Задание 5.3: Найдите время, за которое амплитуда упадет в e раз
% (exp(-1) ≈ 0.3679 от максимума)

%% КОНЕЦ ЛАБОРАТОРНОЙ РАБОТЫ №1
